<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Simulateur 3D — Version stable sans CANNON</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <style>
    body { margin:0;background:#111;color:#fff;font-family:Arial }
    h2 { padding:10px }
    #sim_container {
      width:100%;
      height:600px;
      background:#000;
      position:relative;
      overflow:hidden;
    }
    #sim_container canvas {
      width:100%!important;
      height:100%!important;
      display:block;
    }
    #sim_logs {
      position:absolute;
      left:8px;
      top:8px;
      padding:6px;
      background:rgba(0,0,0,0.6);
      font-size:12px;
      border-radius:4px;
      z-index:10;
    }
  </style>
</head>

<body>
  <h2>Simulateur 3D — Stable</h2>
  <div id="sim_container">
    <div id="sim_logs">Initialisation…</div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>

  <script>
    function slog(msg){
      const box = document.getElementById("sim_logs");
      box.textContent = msg;
      console.log(msg);
    }

    let scene, camera, renderer, robot;

    function init(){
      slog("Chargement THREE.js OK");

      const cont = document.getElementById("sim_container");
      scene = new THREE.Scene();

      camera = new THREE.PerspectiveCamera(
        60,
        cont.clientWidth / cont.clientHeight,
        0.1,
        1000
      );
      camera.position.set(6,4,6);
      camera.lookAt(0,0,0);

      renderer = new THREE.WebGLRenderer({ antialias:true });
      renderer.setSize(cont.clientWidth, cont.clientHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setClearColor(0x111111);
      cont.innerHTML = "";
      cont.appendChild(renderer.domElement);

      // LUMIÈRES
      scene.add(new THREE.AmbientLight(0xffffff, 0.4));
      const dir = new THREE.DirectionalLight(0xffffff, 0.8);
      dir.position.set(5,10,5);
      scene.add(dir);

      // SOL
      const floor = new THREE.Mesh(
        new THREE.PlaneGeometry(40,40),
        new THREE.MeshStandardMaterial({ color:0x333333 })
      );
      floor.rotation.x = -Math.PI/2;
      scene.add(floor);

      // ROBOT
      robot = new THREE.Mesh(
        new THREE.BoxGeometry(1,1,1),
        new THREE.MeshStandardMaterial({ color:0x00aaff })
      );
      robot.position.set(0,0.5,0);
      scene.add(robot);

      slog("Simulation prête ✓");

      animate();
    }

    function animate(){
      requestAnimationFrame(animate);
      robot.rotation.y += 0.01; // animation simple pour voir quelque chose
      renderer.render(scene, camera);
    }

    window.addEventListener("resize", () => {
      const cont = document.getElementById("sim_container");
      camera.aspect = cont.clientWidth / cont.clientHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(cont.clientWidth, cont.clientHeight);
    });

    init();
  </script>
</body>
</html>