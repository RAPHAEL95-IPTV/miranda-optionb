<!doctype html>
<html><head><meta charset="utf-8"><title>Login</title>
<link rel="stylesheet" href="/css/style.css"></head><body>
<div class="container">
  <h2>Connexion</h2>
  <div class="panel">
    <label>Email <input id="email"/></label><br/>
    <label>Password <input id="password" type="password"/></label><br/>
    <button id="btn">Se connecter</button>
    <p id="msg"></p>
  </div>
</div>
<script>
  async function login(){
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const res = await fetch('/api/auth/login', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({email,password})});
    const j = await res.json();
    if(j.token){
      localStorage.setItem('token', j.token);
      localStorage.setItem('role', j.role);
      localStorage.setItem('name', j.name);
      document.getElementById('msg').innerText = 'Connect√©: ' + j.name;
    } else {
      document.getElementById('msg').innerText = 'Erreur: ' + (j.error || JSON.stringify(j));
    }
  }
  document.getElementById('btn').onclick = login;
</script>
</body></html>
